# action.yml
name: Hello World
description: Greet someone and record the time
inputs:
  command: # id of input
    description: Command to run
    required: true
    default: World

runs:
  using: composite
  steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: Log in to the Container registry
      uses: docker/login-action@v3
      with:
        registry: ghcr.io
        username: ${{ github.actor }}
        password: ${{ github.token }}
    - name: Build and push
      uses: docker/build-push-action@v5
      with:
        context: container-images/pyspark-slim
        platforms: linux/amd64,linux/arm64
        push: ${{ steps.pr.outputs.push_image }}
        tags: |
          ghcr.io/energinet-datahub/pyspark-devcontainer:latest
          ghcr.io/energinet-datahub/pyspark-devcontainer:${{ github.sha }}
    - name: Build and run Dev Container task
      uses: devcontainers/ci@v0.3
      with:
        # Change this to point to your image name
        imageName: ghcr.io/energinet-datahub/pyspark-devcontainer:latest
        # Change this to be your CI task/script
        runCmd: |
          ${{ inputs.command }}
